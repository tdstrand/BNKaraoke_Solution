<Window x:Class="BNKaraoke.DJ.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:BNKaraoke.DJ.Converters"
        xmlns:settingsViews="clr-namespace:BNKaraoke.DJ.Views.Settings"
        Title="Settings" Height="720" Width="720" WindowStartupLocation="CenterScreen" Background="#1E3A5F">
    <Window.Resources>
        <local:TestModeConverter x:Key="TestModeConverter"/>
    </Window.Resources>
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0" Margin="0,0,0,12">
            <TabItem Header="General">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="12" Spacing="12">
                        <GroupBox Header="Application Settings" Foreground="White">
                            <StackPanel Margin="10" Spacing="8">
                                <TextBlock Text="API URL" Foreground="White"/>
                                <ComboBox ItemsSource="{Binding AvailableApiUrls}" SelectedItem="{Binding ApiUrl}" Width="300" HorizontalAlignment="Left"/>
                                <TextBlock Text="New API URL" Foreground="White"/>
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <TextBox Text="{Binding NewApiUrl, UpdateSourceTrigger=PropertyChanged}" Width="220"/>
                                    <Button Content="Add" Width="60" Command="{Binding AddApiUrlCommand}"/>
                                    <Button Content="Remove" Width="80" Command="{Binding RemoveApiUrlCommand}"/>
                                </StackPanel>
                                <CheckBox Content="Enable SignalR Sync" IsChecked="{Binding EnableSignalRSync}" Foreground="White"/>
                                <TextBlock Text="SignalR Hub URL" Foreground="White"/>
                                <TextBox Text="{Binding SignalRHubUrl}" Width="300" HorizontalAlignment="Left"/>
                                <TextBlock Text="Reconnect Interval (ms)" Foreground="White"/>
                                <TextBox Text="{Binding ReconnectIntervalMs}" Width="120" HorizontalAlignment="Left"/>
                                <CheckBox Content="Show Debug Console" IsChecked="{Binding ShowDebugConsole}" Foreground="White"/>
                                <CheckBox Content="Enable Verbose Logging" IsChecked="{Binding EnableVerboseLogging}" Foreground="White"/>
                                <TextBlock Text="Log File Path" Foreground="White"/>
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <TextBox Text="{Binding LogFilePath}" Width="320"/>
                                    <Button Content="Browse" Width="80" Command="{Binding BrowseLogFilePathCommand}"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Devices">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="12" Spacing="12">
                        <GroupBox Header="Audio and Video" Foreground="White">
                            <StackPanel Margin="10" Spacing="8">
                                <TextBlock Text="Preferred Audio Device" Foreground="White"/>
                                <ComboBox ItemsSource="{Binding AvailableAudioDevices}" SelectedItem="{Binding PreferredAudioDevice}" DisplayMemberPath="DisplayName" Width="320" HorizontalAlignment="Left"/>
                                <TextBlock Text="Karaoke Video Device" Foreground="White"/>
                                <ComboBox ItemsSource="{Binding AvailableVideoDevices}" SelectedItem="{Binding KaraokeVideoDevice}" DisplayMemberPath="DisplayName" Width="320" HorizontalAlignment="Left"/>
                                <CheckBox Content="Enable Video Caching" IsChecked="{Binding EnableVideoCaching}" Foreground="White"/>
                                <TextBlock Text="Video Cache Path" Foreground="White"/>
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <TextBox Text="{Binding VideoCachePath}" Width="320"/>
                                    <Button Content="Browse" Width="80" Command="{Binding BrowseVideoCachePathCommand}"/>
                                </StackPanel>
                                <TextBlock Text="Cache Size (GB)" Foreground="White"/>
                                <TextBox Text="{Binding CacheSizeGB}" Width="120" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="DJ">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="12" Spacing="12">
                        <GroupBox Header="DJ Preferences" Foreground="White">
                            <StackPanel Margin="10" Spacing="8">
                                <TextBlock Text="Default DJ Name" Foreground="White"/>
                                <TextBox Text="{Binding DefaultDJName}" Width="320" HorizontalAlignment="Left"/>
                                <CheckBox Content="Maximized on Start" IsChecked="{Binding MaximizedOnStart}" Foreground="White"/>
                                <TextBlock Text="Theme" Foreground="White"/>
                                <ComboBox SelectedItem="{Binding Theme}" Width="200" HorizontalAlignment="Left">
                                    <ComboBoxItem>Dark</ComboBoxItem>
                                    <ComboBoxItem>Light</ComboBoxItem>
                                    <ComboBoxItem>Auto</ComboBoxItem>
                                </ComboBox>
                                <CheckBox Content="{Binding TestMode, Converter={StaticResource TestModeConverter}}"
                                          IsChecked="{Binding TestMode}" Foreground="White"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Overlays">
                <settingsViews:OverlaySettingsView Margin="0"/>
            </TabItem>
        </TabControl>

        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10">
            <Button Content="Save" Width="100" Height="32" Command="{Binding SaveSettingsCommand}"/>
            <Button Content="Cancel" Width="100" Height="32" Command="{Binding CancelCommand}"/>
        </StackPanel>
    </Grid>
</Window>
